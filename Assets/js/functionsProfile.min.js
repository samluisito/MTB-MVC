document.addEventListener("DOMContentLoaded",function(){},!0);let tableUsuarios;function mostrarModalFrofile(){$(".js-modal1").addClass("show-modal1")}
function fntRolesUsuarios(){let b=base_url+"roles/getSelectRolesTipo",a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("GET",b,!0);a.send();a.onreadystatechange=function(){4===a.readyState&&200===a.status&&(document.querySelector("#listRolid").innerHTML=a.responseText,document.querySelector("#listRolid").value=1)}}
function setForm(){$("#modalFormUsuario").modal("show");document.querySelector("#formUsuario").onsubmit=function(b){b.preventDefault();b=document.querySelector("#txtIdentificacion").value;let a=document.querySelector("#txtNombre").value,d=document.querySelector("#txtApellido").value,e=document.querySelector("#txtEmail").value,c=document.querySelector("#txtTelefono").value,f=document.querySelector("#listRolid").value;document.querySelector("#txtPassword");if(""===b||""===a||""===d||""===e||""===c||
""===f)return swal.fire("atencion","todos los campos son obligatorios.","error"),!1;b=new FormData(formUsuario);fetch(ajaxUrl=base_url+"usuarios/setUsuario",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:b}).then(a=>a.json()).then(a=>{a.status?($("#modalFormUsuario").modal("hide"),swal.fire("Usuarios",a.msg,"success"),tableUsuarios.ajax.reload(null,!1)):swal.fire("Error",a.msg,"error")})}}
function fntEdit(b){document.querySelector("#titleModal").innerHTML="Actualizar Usuario";document.querySelector(".modal-header").classList.replace("headerRegister","headerUpdate");document.querySelector("#btnActionForm").classList.replace("btn-primary","btn-info");fetch(base_url+"usuarios/getUser/"+b).then(a=>a.json()).then(a=>{a.status?(document.querySelector("#idUsuario").value=a.data.idpersona,document.querySelector("#txtIdentificacion").value=a.data.identificacion,document.querySelector("#txtNombre").value=
a.data.nombres,document.querySelector("#txtApellido").value=a.data.apellidos,document.querySelector("#txtTelefono").value=a.data.telefono,document.querySelector("#txtEmail").value=a.data.email_user,document.querySelector("#listRolid").value=a.data.idrol,setForm()):swal.fire("Error",a.msg,"error")})}
function fntDataFiscal(){if(document.querySelector("#formDataFiscal")){let b=document.querySelector("#formDataFiscal");b.onsubmit=function(a){a.preventDefault();a=document.querySelector("#txtNit").value;var d=document.querySelector("#txtNombreFiscal").value;let e=document.querySelector("#txtDirFiscal").value;if(""===a||""===d||""===e)return swal.fire("atencion","todos los campos con ( * ) son obligatorios.","error"),!1;let c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
a=base_url+"usuarios/putdatfiscal";d=new FormData(b);c.open("POST",a,!0);c.send(d);c.onreadystatechange=function(){if(4==c.readyState&&200===c.status){let a=JSON.parse(c.responseText);a.status?($("#modalFormPerfil").modal("hide"),swal.fire({title:"",text:a.msg,type:"success",confirmButtonText:"Aceptar",closeOnConfirm:!1},function(a){a&&location.reload()})):swal.fire("Error",a.msg,"error")}}}}};