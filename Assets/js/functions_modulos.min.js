var tableModulos;document.addEventListener("DOMContentLoaded",function(){tablaModulos()});function tablaModulos(){tableModulos=$("#tableModulos").DataTable({destroy:!0,aServerSide:!0,responsive:!0,language:{url:"https://cdn.datatables.net/plug-ins/1.10.21/i18n/Spanish.json"},ajax:{url:base_url+"modulos/getmodulos",dataSrc:""},columns:[{data:"idmodulo"},{data:"titulo"},{data:"descripcion"},{data:"status"},{data:"options",searchable:!1}],bProcessing:!0,iDisplayLength:10,order:[[0,"asc"]]})}
function nvoModulo(c){document.querySelector("#idModulo").value="";document.querySelector(".modal-header").classList.replace("headerUpdate","headerRegister");document.querySelector("#btnActionForm").classList.replace("btn-info","btn-primary");document.querySelector("#titleModal").innerHTML="Nuevo Modulo";document.querySelector("#listStatusLabel").hidden=!0;document.querySelector("#listStatus").hidden=!0;document.querySelector("#formModulo").reset();formModulo()}
function fntEdit(c){document.querySelector("#titleModal").innerHTML="Actualizar Rol";document.querySelector(".modal-header").classList.replace("headerRegister","headerUpdate");document.querySelector("#btnActionForm").classList.replace("btn-primary","btn-info");document.querySelector("#listStatusLabel").hidden=!1;document.querySelector("#listStatus").hidden=!1;var b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b.open("GET",base_url+"modulos/getModulo/"+c,!0);b.send();
b.onreadystatechange=function(){if(4===b.readyState&&200===b.status){var a=JSON.parse(b.responseText);a.status?(document.querySelector("#idModulo").value=a.data.idmodulo,document.querySelector("#txtTitulo").value=a.data.titulo,document.querySelector("#txtDescripcion").value=a.data.descripcion,a=(1===a.data.status?'<option value="1" selected class="notBlock">Activo</option>':'<option value="0" selected class="notBlock">Inactivo</option>')+' <option value="1">Activo</option> <option value="0">Inactivo</option>',
document.querySelector("#listStatus").innerHTML=a,formModulo()):Swal.fire("Error",a.msg,"error")}}}
function formModulo(){$(modalFormModulo).modal("show");var c=document.querySelector("#formModulo");c.onsubmit=function(b){b.preventDefault();var a=document.querySelector("#idModulo").value;b=document.querySelector("#txtTitulo").value;var e=document.querySelector("#txtDescripcion").value;a=0<a?document.querySelector("#listStatus").value:document.querySelector("#listStatus").value=1;if(""===b||""===e||""===a)return Swal.fire("atencion","todos los campos son obligatorios.","error"),!1;var d=window.XMLHttpRequest?
new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b=base_url+"modulos/setModulo";e=new FormData(c);d.open("POST",b,!0);d.send(e);d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){var a=JSON.parse(d.responseText);a.status?($("#modalFormModulo").modal("hide"),c.reset(),Swal.fire("Roles de Ususario",a.msg,"success"),tableModulos.ajax.reload()):Swal.fire("Error",a.msg,"error")}}}}
function fntDel(c){Swal.fire({title:"Eliminar rol",text:"Quieres eliminar el Rol?",type:"warning",showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"No, Cancelar",closeOnConfirm:!1,coseOnCancel:!0},function(b){if(b){var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b="idModulo="+c;a.open("POST",base_url+"modulos/delModulo/",!0);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b);a.onreadystatechange=function(){if(4===a.readyState&&
200===a.status){var b=JSON.parse(a.responseText);b.status?(Swal.fire("eliminar!",b.msg,"success"),tableModulos.ajax.reload(null,!1)):Swal.fire("Atencio!",b.msg,"error")}}}})}
function fntStatus(c){var b=document.querySelector("#btnStatusModulo"+c).value,a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("GET",base_url+"modulos/statusModulo/?idModulo="+c+"&intStatus="+b,!0);a.send();a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var b=JSON.parse(a.responseText);b.status?tableModulos.ajax.reload(null,!1):Swal.fire("Atencio!",b.msg,"error")}}};