let div_fbsession='<div class="col-md-4" id="facebook-session"><a href="#" id="fblogout"class="btn btn-danger">Cerrar SesionFB</a></div>',scopes="public_profile,email,user_online_presence",fields="?fields=id,first_name,last_name,email,birthday,gender,picture.height(400).width(400){url},location";window.fbAsyncInit=function(){FB.init({appId:app_id,cookie:!0,xfbml:!0,version:"v11.0"});FB.AppEvents.logPageView()};
(function(a,b,c){var d=a.getElementsByTagName(b)[0];a.getElementById(c)||(a=a.createElement(b),a.id=c,a.src="https://connect.facebook.net/es_LA/sdk.js",d.parentNode.insertBefore(a,d))})(document,"script","facebook-jssdk");function loginFb(){FB.getLoginStatus(function(a){"conectado"===a.status?iniciar_sesion(a):FB.login(function(b){"conectado"===b.status&&iniciar_sesion(b)},{scope:scopes})})}
function iniciar_sesion(a){FB.api("/me"+fields,function(b){let a=new FormData;a.append("oauth_uid",b.id);a.append("nombre",b.first_name);a.append("apellido",b.last_name);a.append("email",b.email);a.append("img",b.picture.data.url);b.birthday?a.append("birthday",b.birthday):"";b.gender?a.append("gender",b.gender):"";b.location?a.append("location",b.location.name):"";fetch(base_url+"registro/regConFb",{method:"POST",body:a}).then(a=>a.json()).then(a=>{a.status?(Swal.fire({title:a.title,text:a.msg,icon:"success",
buttons:"OK",dangerMode:!0}).then(a=>{window.location.reload()}),document.querySelector(".swal-text").innerHTML="<img src='"+a.msg+"' width='70px' height='70px' />"):Swal.fire("Error",a.msg,"error")})},{scope:"email"})}function logoutFb(){FB.logout(function(a){console.log(a)})};