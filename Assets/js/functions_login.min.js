document.addEventListener("DOMContentLoaded",function(){document.querySelector(".login-content")&&$('.login-content [data-toggle="flip"]').click(function(){$(".login-box").toggleClass("flipped");return!1});document.querySelector("#formRsetParword")&&restPass();document.getElementById("password-addon")&&document.getElementById("password-addon").addEventListener("click",function(){let d=document.getElementById("txtPassword");d.type="password"==d.type?"text":"password"})});
function login(){let d=document.querySelector("#txtEmail").value,c=document.querySelector("#txtPassword").value;if(""===d||""===c)return swal("Por Favor","Escribe Usuario y Contrase\u00f1a","error"),!1;var a=document.querySelector("#formLogin");a=new FormData(a);fetch(base_url+"login/loginUser",{method:"POST",body:a}).then(b=>b.json()).then(b=>{b.status?(history.pushState(null,null,"?txtEmail="+d+"&txtPassword="+c+"#"),history.replaceState({},document.title,window.location.pathname),"login"===document.title?
window.location.href=base_url+"dashboard":location.reload()):"function"===typeof swal&&"undefined"===typeof swal.showLoading?swal("Atencion!",b.msg,"error"):Swal.fire("Atencion!",b.msg,"error")}).catch(b=>{console.error("Error:",b)})}
function restPass(){let d=document.querySelector("#formRsetParword");d.onsubmit=function(c){c.preventDefault();c=document.querySelector("#txtPassword").value;var a=document.querySelector("#txtPasswordConfirm").value;if(""!==c||""!==a){if(c!==a)return Swal.fire("Error","Las Contrase\u00f1as no son iguales","error"),!1;if(5>c.length)return Swal.fire("Error","Las contrase\u00f1a debe tener minimo 5 caracteres","info"),!1}let b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
c=base_url+"login/actualizarPassword";a=new FormData(d);b.open("POST",c,!0);b.send(a);b.onreadystatechange=function(){if(4===b.readyState){if(200===b.status){let a=JSON.parse(b.responseText);a.status?Swal.fire({title:"",text:a.msg,type:"success",confirmButtonText:"Aceptar",closeOnConfirm:!1},function(a){a&&(window.location=base_url+"dashboard")}):(Swal.fire("Atencion",a.msg,"error"),document.querySelector("#txtPassword").value="",document.querySelector("#txtPasswordConfirm").value="")}else Swal.fire("Error",
"Error en el proceso","error");return!1}}}}
function fntForgetPassword(){let d=document.querySelector("#formForgetPassword");d.onsubmit=function(c){c.preventDefault();if(""===document.querySelector("#txtEmailFP").value)return Swal.fire("Por Favor","Escribe tu Usuario","error"),!1;{let a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c=base_url+"login/forgetPassword";let b=new FormData(d);a.open("POST",c,!0);a.send(b);a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status){console.log("1");let b=
JSON.parse(a.responseText);b.status?Swal.fire("Atencion",b.msg,"success"):Swal.fire("Atencion",b.msg,"error")}else Swal.fire("Error","Error en el proceso","error");return!1}}}}};