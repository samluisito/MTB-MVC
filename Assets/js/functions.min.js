let divLoading=document.querySelector("#divLoading");window.addEventListener("beforeunload",function(a){});document.addEventListener("DOMContentLoaded",function(){window.scrollTo(0,0)});$(".js-select2").each(function(){$(this).select2({minimumResultsForSearch:20,dropdownParent:$(this).next(".dropDownSelect2")})});$(".gallery-lb").each(function(){$(this).magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0},mainClass:"mfp-fade"})});
function favoritoAddDel(a,b,c){a="add"===a?`${base_url}tienda/addFavorito`:`${base_url}tienda/delFavorito`;c=new FormData;c.append("id",b);fetch(a,{method:"POST",body:c}).then(a=>a.json()).then(a=>{a.status||swal("Error",a.msg,"error")}).catch(a=>{console.log(a.message)})}
document.querySelectorAll(".js-addwish-b2").forEach(a=>{let b=a.parentNode.parentNode.querySelector(".js-name-b2").innerHTML;a.addEventListener("click",function(a){a.preventDefault();0==sessionlogin?mostrarModalLogin():(a=this.id.split("-")[1],this.classList.contains("js-addedwish-b2")?(document.querySelector(`#fav-${a}`).classList.remove("js-addedwish-b2"),favoritoAddDel("del",a,b)):(document.querySelector(`#fav-${a}`).classList.add("js-addedwish-b2"),favoritoAddDel("add",a,b)))})});
document.querySelectorAll(".js-addwish-detail").forEach(a=>{let b=a.parentNode.parentNode.parentNode.querySelector(".js-name-detail").innerHTML;a.addEventListener("click",function(a){a.preventDefault();0==sessionlogin?mostrarModalLogin():(a=this.id.split("-")[1],this.classList.contains("js-addedwish-detail")?(console.log("del"),document.querySelector(`#fav-${a}`).classList.remove("js-addedwish-detail"),favoritoAddDel("del",a,b)):(console.log("add"),document.querySelector(`#fav-${a}`).classList.add("js-addedwish-detail"),
favoritoAddDel("add",a,b)))})});$(".js-pscroll").each(function(){$(this).css("position","relative");$(this).css("overflow","hidden");let a=new PerfectScrollbar(this,{wheelSpeed:1,scrollingThreshold:1E3,wheelPropagation:!1});$(window).on("resize",function(){a.update()})});
$(".js-addcart-detail").each(function(){let a=$(this).parent().parent().parent().parent().find(".js-name-detail").html();$(this).on("click",function(){let b=this.getAttribute("id"),c=Number(document.querySelector("#cant-product").value);isNaN(c)||1>c?(swal(a,"La cantidad debe de ser mayor o igual a 1 ","error"),!1):!0;let d=document.querySelector("#talle-product")?document.querySelector("#talle-product").value:null,e=document.querySelector("#color-product")?document.querySelector("#color-product").value:
null,f=new FormData;f.append("id",b);f.append("cant",c);f.append("talle",d);f.append("color",e);fetch(base_url+"tienda/addCarrito",{method:"POST",body:f}).then(a=>a.json()).then(b=>{b.status?(document.getElementById("productosCarrito").innerHTML=b.htmlCarrito,document.querySelector(".header-cart-total").innerHTML="Total: "+b.totalCarrito,document.querySelectorAll(".cantCarrito").forEach(function(a){a.setAttribute("data-notify",b.cantCarrito)}),swal(a,"ha sigo agregadoi al carrito!","success")):swal("Error",
b.msg,"error")}).catch(a=>console.error("Error:",a))})});
function fntdelItem(a){let b=a.getAttribute("op"),c=a.getAttribute("idpr");if(1==b||2==b){let d=new FormData;d.append("id",c);d.append("option",b);fetch(base_url+"tienda/delCarrito",{method:"POST",body:d}).then(a=>a.json()).catch(a=>console.error("Error:",a)).then(c=>{c.status?1==b?(document.querySelector("#productosCarrito").innerHTML=c.htmlCarrito,document.querySelectorAll(".cantCarrito").forEach(function(a){a.setAttribute("data-notify",c.cantCarrito)})):2==b&&(a.parentNode.parentNode.remove(),
document.querySelector("#subTotalCompra").innerHTML=c.subTotal,document.querySelector("#totalCompra").innerHTML=c.total,1==document.querySelectorAll("#tblCarrito tr").length&&swal({title:"UPSS YA NO HAY PRODUCTOS EN EL CARRITO",text:"Seras redireccionado a la pagina de inicio",icon:"info",buttons:"OK",dangerMode:!0}).then(a=>{window.location.href=base_url})):swal("Error",c.msg,"error")})}}
$(".btn-num-product-down").on("click",function(){var a=Number($(this).next().val());1<a&&$(this).next().val(a-1);if(document.querySelector("#btnComprar")){a=this.getAttribute("idpr");let b=$(this).next().val();fntUpdateCant(a,b)}});$(".btn-num-product-up").on("click",function(){var a=Number($(this).prev().val());$(this).prev().val(a+1);if(document.querySelector("#btnComprar")){a=this.getAttribute("idpr");let b=$(this).prev().val();fntUpdateCant(a,b)}});
document.querySelector(".num-product")&&document.querySelectorAll(".num-product").forEach(function(a){a.addEventListener("keyup",function(){let a=this.getAttribute("idpr");fntUpdateCant(a,this.value)})});
function fntUpdateCant(a,b){if(0>=b)document.querySelector("#btnComprar").classList.add("notBlock");else{document.querySelector("#btnComprar").classList.remove("notBlock");let c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),d=base_url+"tienda/updCarrito",e=new FormData;e.append("id",a);e.append("cant",b);c.open("POST",d,!0);c.send(e);c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){let b=JSON.parse(c.responseText);b.status?(document.getElementsByClassName(a)[0].cells[4].textContent=
b.totalProducto,document.querySelector("#subTotalCompra").innerHTML=b.subTotal,document.querySelector("#totalCompra").innerHTML=b.total):swal("Error",b.msg,"error")}}}}document.querySelector("#condiciones")&&document.querySelector("#condiciones").addEventListener("click",function(){this.checked?document.querySelector("#btnRegistrarme").classList.remove("notBlock"):document.querySelector("#btnRegistrarme").classList.add("notBlock")});
if(document.querySelector("#formContacto")){let a=document.querySelector("#formContacto");a.onsubmit=function(b){b.preventDefault();b=document.querySelector("#txtNombre").value;var c=document.querySelector("#txtApellido").value;let d=document.querySelector("#txtTelefono").value,e=document.querySelector("#txtEmail").value;""===b||""===c||""===d||""===e?swal("Datos Incompletos","COMPLETE LOS DATOS NECESARIOS","error"):(b=base_url+"contacto/formContacto",c=new FormData(a),fetch(b,{method:"POST",body:c}).then(a=>
a.json()).then(a=>{a.status?swal({title:"GRACIAS POR CONTACTARNOS",text:a.msg,icon:"success",buttons:"Volver al home",dangerMode:!0}).then(a=>{window.location.href=base_url+"home"}):swal("Error",a.msg,"error")}))}}function mostrarModalLogin(){let a=document.querySelector("#modalLogin");a.classList.contains("notBlock")&&a.classList.remove("notBlock");setTimeout(()=>{a.classList.add("show-modal1")},5)}
document.querySelector(".campo-requerido")&&document.querySelectorAll(".campo-requerido").forEach(function(a){a.addEventListener("blur",function(){let a="#"+this.id,c=this.value.trim(),d="#feedback-"+this.name;3<=c.length?(document.querySelector(a).classList.remove("is-invalid"),document.querySelector(a).value=c,document.querySelector(d).classList.remove("invalid-feedback"),document.querySelector(d).classList.add("notBlock")):(document.querySelector(a).classList.add("is-invalid"),document.querySelector(a).value=
c,document.querySelector(d).classList.add("invalid-feedback"),document.querySelector(d).classList.remove("notBlock"))})});
function validarMailExist(a){a="#"+a;let b=document.querySelector(a).value.trim(),c="#feedback-"+a.replace("#","");if(8>b.length)document.querySelector(a).classList.remove("is-valid"),document.querySelector(a).classList.add("is-invalid"),document.querySelector(c).classList.add("invalid-feedback"),document.querySelector(c).classList.remove("notBlock"),document.querySelector(c).innerHTML="Mail Invalido";else{let d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e=base_url+
"registro/validarMail",f=new FormData;f.append("mail",b);d.open("POST",e,!0);d.send(f);d.onreadystatechange=function(b){4==d.readyState&&200==d.status&&(b=JSON.parse(d.responseText),"OK"==b?(document.querySelector(a).classList.remove("is-invalid"),document.querySelector(a).classList.add("is-valid"),document.querySelector(c).innerHTML="",document.querySelector(c).classList.remove("invalid-feedback"),document.querySelector(c).classList.add("notBlock")):"Exist"==b?(document.querySelector(a).classList.remove("is-valid"),
document.querySelector(a).classList.add("is-invalid"),document.querySelector(c).innerHTML="Este Email ya se encuentra registrado",document.querySelector(c).classList.remove("notBlock"),document.querySelector(c).classList.add("invalid-feedback")):"ivalid_format"==b&&(document.querySelector(a).classList.remove("is-valid"),document.querySelector(a).classList.add("is-invalid"),document.querySelector(c).innerHTML="Formato de Email invalido ",document.querySelector(c).classList.remove("notBlock"),document.querySelector(c).classList.add("invalid-feedback")))}}document.querySelector(a).value=
b}function btnPasoSiguiente(a){let b=0;document.querySelectorAll(".paso-"+a).forEach(function(a,d){d=a.id;a=a.value;document.getElementById(d).matches(".is-invalid")?b++:""==a&&(document.getElementById(d).classList.add("is-invalid"),b++)});document.getElementById("metodoEntregaSelect")&&"retiro"==document.getElementById("metodoEntregaSelect").value&&(b=0);0==b&&(a=$(".wizard .nav-tabs li.active"),nextTab(a))}
if(document.querySelector("#nvoUsusario")){let a=document.querySelector("#nvoUsusario");a.onsubmit=function(b){b.preventDefault();let c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b=base_url+"registro/regNvoUsuario";let d=new FormData(a);c.open("POST",b,!0);c.send(d);c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){let a=JSON.parse(c.responseText);a.status?(setTimeout(()=>window.history.back(),3E4),swal({title:"Registro Exitoso",text:a.msg,icon:"info",
buttons:"OK",dangerMode:!0}).then(a=>{window.history.back()})):swal("Error",a.msg,"error")}}}}function btnBuscarEnter(a){if(13===a.keyCode&&!a.shiftKey){a=document.querySelector("#searchW").value;let b=document.querySelector("#searchM").value;window.location.href=base_url+"tienda/search/"+(""==a?b:a)}}document.querySelector(".wrap-slick3-dots")&&document.querySelector(".slick-track")&&(alturaSlick3Dots(),window.onresize=()=>alturaSlick3Dots(),screen.orientation.onchange=()=>alturaSlick3Dots());
function alturaSlick3Dots(){setTimeout(()=>{let a=document.querySelector(".slick-track").clientHeight;document.querySelector(".wrap-slick3-dots").style.height=a+"px"},50)};